openapi: 3.0.0
info:
  title: Test API for Path Changes
  version: 1.0.0
  description: API with Foo schema variations for testing

paths:
  /foo:
    post:
      operationId: createFoo
      summary: Create a new Foo
      description: Creates a new Foo resource
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Foo_FVO"
      responses:
        "201":
          description: Foo created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Foo_RES"
        "400":
          description: Bad request
        "500":
          description: Internal server error
    get:
      operationId: listFoo
      summary: List all Foo resources
      description: Retrieves a list of Foo resources
      responses:
        "200":
          description: List of Foo resources
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Foo_RES"
        "500":
          description: Internal server error

  /foo/{id}:
    get:
      operationId: getFoo
      summary: Get a specific Foo
      description: Retrieves a Foo by ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Foo found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Foo_RES"
        "404":
          description: Foo not found
        "500":
          description: Internal server error

components:
  schemas:
    Root:
      type: object
      description: Base Root schema
      properties:
        id:
          type: string
          description: Unique identifier
        name:
          type: string
          description: Name of the Foo
    Foo:
      allOf:
        - $ref: "#/components/schemas/Root"
        - type: object
          description: Base Foo schema
          properties:
            description:
              type: string
              description: Description of the Foo
            status:
              type: string
              description: Current status
              enum:
                - active
                - inactive
                - pending
            createdAt:
              type: string
              format: date-time
              description: Creation timestamp
            updatedAt:
              type: string
              format: date-time
              description: Last update timestamp
          required:
            - name
      discriminator:
        mapping:
          Foo: "#/components/schemas/Foo"
        propertyName: name

    Foo_FVO:
      description: Foo For Value Object - used for creation (write-only)
      allOf:
        - $ref: "#/components/schemas/Foo"
        - type: object
          properties:
            category:
              type: string
              description: Category for the new Foo
            tags:
              type: array
              items:
                type: string
              description: Tags for categorization
          required:
            - category
      discriminator:
        mapping:
          Foo: "#/components/schemas/Foo_FVO"
        propertyName: name
    Foo_RES:
      description: Foo Response - used for responses (read-only)
      allOf:
        - $ref: "#/components/schemas/Foo"
        - type: object
          properties:
            href:
              type: string
              description: URL reference to this resource
            version:
              type: integer
              description: Version number
            metadata:
              type: object
              description: Additional metadata
              additionalProperties: true
          required:
            - id
            - href
      discriminator:
        mapping:
          Foo: "#/components/schemas/Foo_RES"
        propertyName: name
